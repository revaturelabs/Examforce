<template>
    <div class="container">
    <!-- Timer and Title Component -->
    <div class="timer card">
        <div>Exam Name: {ExamName}</div>
        <div>Time Remaining {timer}</div>
    </div>
    <!-- Question Body  -->
    <div class="questionBody card">
        <div class="qTitle">
            <div>Question {currentQuestion} of {ExamLength}:</div>
            <lightning-button variant="base" label="Mark for Review" title="Mark for Review" onclick={markForReview} class="reviewButton"></lightning-button>
            <!-- <div class="reviewButton">Mark for Review</div> -->
        </div>
        <div>
            {questionBody}
        </div>
    </div>
    <!-- Question answer section 
    Will need to be adjusted due to correct question type
    multi select question as placeholder -->

    <!-- <c-multipleChoice value={questionData}></c-multipleChoice> -->

    <template if:true={multipleChoice}>
        <div class="card">
            <lightning-radio-group name="radioGroup"
                              label="Choose the Best Answer"
                              options={options}
                              value={userAnswer}
                              onchange={setAnswer}
                              type="radio"></lightning-radio-group>
        </div>
    </template>


    <!-- Flag / next / previous controls -->
    <div class="buttons">
        <lightning-button variant="base" label="Flag" title="Flag" onclick={switchIsFlagged} class="flag"></lightning-button>
        <!-- <div class="flag">Flag</div> -->
        <div class="controls"> 
            <lightning-button variant="base" label="Previous" title="Previous" onclick={previous} class="control"></lightning-button>
            <lightning-button variant="base" label="Next" title="Next" onclick={next} class="control"></lightning-button>
        </div>
    </div>
    <!-- Question Navigation/Display/Key/Submit -->
    <div class="questionDisplay card">
        <div class="list" lwc:dom="manual">
            <!-- 
            <div class="answered q">1</div>
            <div class="answered q">2</div>
            <div class="review q">3</div>
            <div class="flagged q">4</div>
            <div class="q">5</div> 
            -->
        </div>

        <div class="key">
            <div class="answered keyItem"> &nbsp;</div>Answered
            <div class="unanswered keyItem">&nbsp;</div>Unanswered
            <div class="review keyItem">&nbsp;</div>Review
            <div class="flagged keyItem">&nbsp;</div>Flagged
        </div>
        <lightning-button variant="base" label="Submit Exam" title="Submit Exam" onclick={checkQuestions} class="submit keyItem"></lightning-button>
    </div>
    </div>
    <template if:true={submitPopUp}>
        <div class="dimmer"></div>
        <div class="card popUp">
            <h1 class="slds-text-heading_large"><b>Submit Exam</b></h1>
            <ul>
                <li>You have {questionsMarkedForReview} questions still marked for review, and {questionsUnanswered} unanswered questions</li>
                <li>Are you sure?</li>
            </ul>
            <div class="submitControls">
                <lightning-button variant="base" label="Return" title="Return" onclick={exitSubmit} class="reviewButton"></lightning-button>
                <lightning-button variant="base" label="Submit Exam" title="Submit Exam" onclick={submitExam} class="submit keyItem"></lightning-button>
            </div>
        </div>
    </template>
    <template if:true={scorePopUp}>
        <div class="dimmer"></div>
        <div class="card popUp">
            <h1 class="slds-text-heading_large"><b>Exam Submitted</b></h1>
            <ul>
                <li>You scored</li>
                <li>{totalScore}</li>
                <li>and passed/failed the exam</li>
            </ul>
            <lightning-button variant="base" label="Close" title="Close" onclick={close} class="reviewButton"></lightning-button>
        </div>
    </template>
    <template if:true={isFlagged}>
        <!-- Needs to be added to Head
        <META HTTP-EQUIV="Content-type" CONTENT="text/html; charset=UTF-8">
        -->
        <div class="dimmer"></div>
            <div class="card popUp">
                <form action="https://webto.salesforce.com/servlet/servlet.WebToCase?encoding=UTF-8" method="POST">

                    <input type=hidden name="orgid" value="00D8Z000000s0Hk">
                <!--  ----------------------------------------------------------------------  -->
                <!--  NOTE: These fields are optional debugging elements. Please uncomment    -->
                <!--  these lines if you wish to test in debug mode.                          -->
                <!--  <input type="hidden" name="debug" value=1>                              -->
                <!--  <input type="hidden" name="debugEmail" value="mmccain814@gmail.com">    -->
                <!--  ----------------------------------------------------------------------  -->
                <!-- Not sure if these are needed
                <label for="name">Contact Name</label><input  id="name" maxlength="80" name="name" size="20" type="text" /><br>
                
                <label for="email">Email</label><input  id="email" maxlength="80" name="email" size="20" type="text" /><br>
                
                <label for="phone">Phone</label><input  id="phone" maxlength="40" name="phone" size="20" type="text" /><br>
                -->
                <input  type="hidden" id="subject" name="subject" value={flaggedQuestion}/><br>
                
                <label for="description">Description</label><textarea name="description"></textarea><br>
                
                <input type="submit" name="submit" onclick={switchIsFlagged}>
                
                </form>
            </div>
            </template>
        

</template>